<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
		<title>Singgit</title>
		<link rel="manifest" href="manifest.json">

		<link rel="stylesheet" href="font/icomoon/style.css">
		<link rel="stylesheet" href="lib/bootstrap/bootstrap.min.css">
		<link rel="stylesheet" href="lib/clusterize/clusterize.min.css">
		<link rel="stylesheet" href="lib/singgit.css">
	</head>
	<body>
		<div id="singgit">
			<div class="tab-content row">
				<div role="tabpanel" class="tab-pane col-md-4 active" id="form">
					<form class="card">
						<div class="card-header row">New Transaction</div>
						<div class="form-group row">
							<label class="col-4 col-form-label">Amount</label>
							<div class="col-8"><input type="number" class="form-control" id="amount" name="amount"></div>
						</div>
						<div class="form-group row">
							<label class="col-4 col-form-label">Description</label>
							<div class="col-8">
								<div class="input-group">
									<input type="text" class="form-control" id="description" name="description">
									<div class="input-group-append">
										<span class="input-group-text favourite" :class="{'active':favourite}" @click="favourite=!favourite"><i class="icon-heart"></i></span>
									</div>
								</div>
								
							</div>
						</div>
						<div class="form-group row">
							<label class="col-4 col-form-label">Account</label>
							<div class="col-8">
								<select class="form-control" id="account" name="account">
									<option v-for="item in accounts" :value="item">{{item}}</option>
								</select>
							</div>
						</div>
						<div class="form-group row">
							<label class="col-4 col-form-label">Category</label>
							<div class="col-8">
								<select class="form-control" id="category" name="category">
									<option v-for="item in categories" :value="item">{{item}}</option>
								</select>
							</div>
						</div>
						<div class="form-group row">
							<label class="col-4 col-form-label">Transfer To</label>
							<div class="col-8">
								<select class="form-control" id="transfer" name="transfer">
									<option value=""></option>
									<option v-for="item in accounts" :value="item">{{item}}</option>
								</select>
							</div>
						</div>
						<div class="form-group row">
							<label class="col-4 col-form-label">Date</label>
							<div class="col-8"><input type="date" class="form-control" id="date" name="date"></div>
						</div>
						<div class="form-group row">
							<div class="btn-group col-12" role="group">
								<button type="button" class="btn btn-primary col" @click="newTransaction()">New</button>
								<button type="button" class="btn btn-primary col d-none" @click="deleteTransaction()" :class="{'d-inline-block':editItem!=null}">Delete</button>
								<button type="button" class="btn btn-primary col" @click="saveTransaction()">Save</button>
							</div>
						</div>
						<div class="form-group row text-center d-block mt-5 version">IDX&nbsp;0508&nbsp;&nbsp;&nbsp;CSS&nbsp;<span id="version_css"></span>&nbsp;&nbsp;&nbsp;JS&nbsp;<span id="version_js"></span></div>
					</form>
				</div>
				<div role="tabpanel" class="tab-pane col-md-4" id="transaction">
					<div class="card">
						<div class="card-header row">
							<input type="text" class="form-control" id="filter" v-model="filter" @change="clusterize.update(populateData())">
						</div>
						<div id="scrollArea" class="clusterize-scroll">
							<ul id="contentArea" class="list-group clusterize-content"></ul>
						</div>
					</div>
				</div>
				<div role="tabpanel" class="tab-pane col-md-4" id="statistic">
					<div class="card">
						<div class="card-header row d-flex justify-content-between align-items-center">
							Statistic
							<span>
								<i class="icon-navigation-2 icon-arrow-left p-2" @click="navigateMonth(-1)"></i>
								{{statFilterDesc}}
								<i class="icon-navigation-2 icon-arrow-right p-2" @click="navigateMonth(1)"></i>
							</span>
						</div>
						<b></b>
						
						<ul class="list-group">
							<li class="list-group-item d-flex justify-content-between align-items-center list-header">CURRENT BALANCE <span :class="{positive:accounts_balance_all>=0, negative:accounts_balance_all<0}">{{toCurrency(accounts_balance_all)}}</span></li>
							<li class="list-group-item d-flex justify-content-between align-items-center" v-for="item in accounts">
								{{item}}
								<span :class="{positive:accounts_balance[item]>=0, negative:accounts_balance[item]<0}">{{toCurrency(accounts_balance[item])}}</span>
							</li>
						</ul>
						
						<ul class="list-group mt-3">
							<li class="list-group-item d-flex justify-content-between align-items-center list-header">MONTHLY PERFORMANCE <span :class="{positive:income+expenses>=0, negative:income+expenses<0}">{{toCurrency(income+expenses)}}</span></li>
							<li class="list-group-item d-flex justify-content-between align-items-center">
								Income
								<span :class="{positive:income>=0, negative:income<0}">{{toCurrency(income)}}</span>
							</li>
							<li class="list-group-item d-flex justify-content-between align-items-center">
								Expenses
								<span :class="{positive:expenses>=0, negative:expenses<0}">{{toCurrency(expenses)}}</span>
							</li>
						</ul>
						
						<ul class="list-group mt-3">
							<li class="list-group-item list-header">MONTHLY EXPENSES</li>
							<li class="list-group-item d-flex justify-content-between align-items-center" v-for="item in categories" v-if="['Income','Transfer'].indexOf(item)<0">
								{{item}}
								<span :class="{positive:categories_expenses[item]>=0, negative:categories_expenses[item]<0}">{{toCurrency(categories_expenses[item])}}</span>
							</li>
						</ul>
					</div>
				</div>
			</div>
			
			<ul class="nav nav-pills fixed-bottom border-top d-md-none" role="tablist">
				<li class="nav-item col"><a href="#form" role="tab" data-toggle="pill" class="nav-link text-center active" @click="newTransaction()"><i class="icon-file"></i></a></li>
				<li class="nav-item col"><a href="#transaction" role="tab" data-toggle="pill" class="nav-link text-center"><i class="icon-book-open"></i></a></li>
				<li class="nav-item col"><a href="#statistic" role="tab" data-toggle="pill" class="nav-link text-center"><i class="icon-trending-up"></i></a></li>
			</ul>
		</div>
		
		<script type="text/javascript">if('serviceWorker' in navigator) navigator.serviceWorker.register('service-worker.js');</script>
		<script src="lib/jquery/jquery-3.2.1.slim.min.js"></script>
		<script src="lib/firebase/firebase.js"></script>
		<script src="lib/firebase/firebase-firestore.js"></script>
		<script src="lib/bootstrap/popper.min.js"></script>
		<script src="lib/bootstrap/bootstrap.min.js"></script>
		<script src="lib/moment/moment.min.js"></script>
		<script src="lib/vue/vue.js"></script>
		<script src="lib/clusterize/clusterize.min.js"></script>
		<script src="lib/jquery.autocomplete/jquery.autocomplete.min.js"></script>
		<script src="lib/singgit.js"></script>
	</body>
</html>